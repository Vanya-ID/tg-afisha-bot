tg-afisha-bot
================

–¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–∞—Ä—Å–∏—Ç –∞—Ñ–∏—à—É —Å–∞–π—Ç–∞ –∫—É–∫–æ–ª—å–Ω–æ–≥–æ —Ç–µ–∞—Ç—Ä–∞ –ú–∏–Ω—Å–∫–∞ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ —Å–ø–µ–∫—Ç–∞–∫–ª–∏ –≤ —á–∞—Ç. –¢–∞–∫–∂–µ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ (heartbeat) –ø–æ—Å–ª–µ 09:00 –ø–æ –≤—Ä–µ–º–µ–Ω–∏ Europe/Minsk.

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
--------------------
- TELEGRAM_TOKEN ‚Äî —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
- TELEGRAM_CHAT_ID ‚Äî ID —á–∞—Ç–∞/–∫–∞–Ω–∞–ª–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- REDIS_URL ‚Äî —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Redis
  - –ª–æ–∫–∞–ª—å–Ω–æ: redis://127.0.0.1:6379
  - –æ–±–ª–∞–∫–æ (Upstash –∏ —Ç.–ø.): rediss://default:<PASSWORD>@<HOST>:<PORT>

–õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
----------------
```
npm ci
npm run build
npm start
```

Railway –¥–µ–ø–ª–æ–π
--------------
–í –ø—Ä–æ–µ–∫—Ç–µ –µ—Å—Ç—å railway.toml:
- build: npm run build
- start: npm start

–®–∞–≥–∏:
1. –ü–æ–¥–∫–ª—é—á–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫ Railway (Deploy from GitHub)
2. –í Variables –¥–æ–±–∞–≤—å TELEGRAM_TOKEN, TELEGRAM_CHAT_ID, REDIS_URL
3. –í Settings —Å–µ—Ä–≤–∏—Å–∞ –ø—Ä–æ–≤–µ—Ä—å Source = GitHub, –≤–µ—Ç–∫—É –∏ Auto Deploy
4. –°–¥–µ–ª–∞–π git push –∏–ª–∏ –Ω–∞–∂–º–∏ Redeploy

–í–∞–∂–Ω–æ: –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º –ø–ª–∞–Ω–µ —Å–µ—Ä–≤–∏—Å –º–æ–∂–µ—Ç ¬´—É—Å—ã–ø–ª—è—Ç—å—Å—è¬ª. –ï—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω Autosleep ‚Äî –ø—Ä–æ—Ü–µ—Å—Å –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å 24/7, –∞ heartbeat –ø—Ä–∏–¥—ë—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è.

VPS –¥–µ–ø–ª–æ–π (Ubuntu/Debian + pm2)
--------------------------------
```
sudo apt update
sudo apt install -y ca-certificates curl gnupg
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt install -y nodejs build-essential redis-server
sudo npm i -g pm2

git clone <REPO_URL> tg-afisha-bot
cd tg-afisha-bot

cat > .env << EOF
TELEGRAM_TOKEN=...
TELEGRAM_CHAT_ID=...
REDIS_URL=redis://127.0.0.1:6379
EOF

npm ci --production
npm run build
pm2 start dist/index.js --name tg-afisha-bot
pm2 save
pm2 startup
```

–õ–æ–≥–∏
----
- –ª–æ–∫–∞–ª—å–Ω–æ ‚Äî –≤ –∫–æ–Ω—Å–æ–ª–∏
- pm2 ‚Äî `pm2 logs tg-afisha-bot`
- Railway ‚Äî –≤–∫–ª–∞–¥–∫–∞ Logs

–ö–ª—é—á–µ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ª–æ–≥–∞—Ö
--------------------------
- üîÑ –ù–∞—á–∏–Ω–∞—é –ø–∞—Ä—Å–∏–Ω–≥ –∞—Ñ–∏—à–∏...
- üìä –ù–∞–π–¥–µ–Ω–æ N —Å–ø–µ–∫—Ç–∞–∫–ª–µ–π
- üß≠ –ü–µ—Ä–≤–∞—è –∞—Ñ–∏—à–∞..., üèÅ –ü–æ—Å–ª–µ–¥–Ω—è—è –∞—Ñ–∏—à–∞..., üîé –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–≤—ã—Ö –∞—Ñ–∏—à: ...
- üé≠ –ù–æ–≤—ã–π —Å–ø–µ–∫—Ç–∞–∫–ª—å: ...
- ‚úîÔ∏è –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- –£—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis / –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–ü—Ä–∏–º–µ—á–∞–Ω–∏—è
----------
- Heartbeat –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –≤ –¥–µ–Ω—å –ø–æ—Å–ª–µ 09:00 (Europe/Minsk)
- –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ Redis (–∫–ª—é—á–∏ —Å–ø–µ–∫—Ç–∞–∫–ª–µ–π –∏ heartbeat –Ω–∞ –¥–∞—Ç—É)

